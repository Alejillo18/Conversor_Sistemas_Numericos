import{convertir}from"../js/conversion.js";import{armarHistorial}from"../js/armarHistorial.js";import{eliminarHistorial}from"../js/eliminarHistorial.js";const caracteresPorSistema={decimal:["0","1","2","3","4","5","6","7","8","9",",","."],octal:["0","1","2","3","4","5","6","7",",","."],hexadecimal:["0","1","2","3","4","5","6","7","8","9","a","A","b","B","c","C","d","D","e","E","f","F",",","."],binario:["0","1",",","."]};function verificarIngreso(e,t){if("string"!=typeof e||""===e.trim())return!1;for(let r of e)if(!caracteresPorSistema[t].includes(r))return!1;return!(e.split("").filter((e=>"."===e||","===e)).length>1)}export const ConversionPage={template:'\n        <form id="form-entrada">\n            <label for="input">Ingrese el número que desea convertir</label>\n            <input name="valor" type="text" id="input" required>\n            <label for="sistema">Seleccione el sistema desde el cual desea realizar la conversión</label>\n            <select name="sistema" id="sistema" required>\n                <option value="decimal">Decimal</option>\n                <option value="binario">Binario</option>\n                <option value="octal">Octal</option>\n                <option value="hexadecimal">Hexadecimal</option>\n            </select>\n            <button type="submit" id="buttonConvertir" class="disabled" disabled>Convertir</button>\n        </form>\n    ',init:()=>{const e=document.getElementById("form-entrada"),t=document.getElementById("input"),r=document.getElementById("sistema"),i=document.getElementById("buttonConvertir"),a=document.getElementById("historial"),o=document.querySelector(".elimHistorial"),n=document.getElementById("resultados");function s(){const e=t.value.trim(),a=r.value;return""===e?(t.classList.add("vacia"),i.disabled=!0,i.classList.remove("enabled"),void i.classList.add("disabled")):verificarIngreso(e,a)?(t.classList.remove("vacia"),t.classList.remove("incorrecto"),t.classList.add("correcto"),i.disabled=!1,i.classList.remove("disabled"),i.classList.add("enabled"),!0):(t.classList.remove("vacia"),t.classList.remove("correcto"),t.classList.add("incorrecto"),i.disabled=!0,i.classList.remove("enabled"),i.classList.add("disabled"),!1)}n.innerHTML="",t.addEventListener("input",s),r.addEventListener("change",s),s(),e.addEventListener("submit",(t=>{if(t.preventDefault(),s()){let t=e.sistema.value,r=e.valor.value;const i=convertir(r,t);n.innerHTML=i}a.innerHTML=armarHistorial(o)})),a.innerHTML=armarHistorial(o),o.addEventListener("click",(()=>{Swal.fire({title:"¿Estás seguro?",text:"Se borrará todo el historial y no podrás recuperarlo.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, borrar",cancelButtonText:"Cancelar",background:'#fff url("assets/bg.webp") no-repeat center/cover',backdrop:"\n    rgba(0,0,0,0.5)\n    left top\n    no-repeat\n  ",color:"white"}).then((e=>{e.isConfirmed&&(Swal.fire({title:"¡Eliminado!",text:"Tu historial fue borrado con éxito.",icon:"success",confirmButtonColor:"#3085d6",background:'url("assets/bg.webp") no-repeat center/cover',color:"#fff",customClass:{icon:"swal2-icon-light"}}),eliminarHistorial(o),a.innerHTML=armarHistorial(o))})),a.innerHTML=armarHistorial(o)}))}};