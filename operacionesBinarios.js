import{realizarOperaciones}from"./js/operaciones.js";import{eliminarHistorial}from"./js/eliminarHistorial.js";import{armarHistorial}from"./js/armarHistorial.js";const caracteresPermitidos=["0","1",",","."];function esBinarioValido(e){if("string"!=typeof e||""===e.trim())return!1;for(let r of e)if(!caracteresPermitidos.includes(r))return!1;return!(e.split("").filter((e=>"."===e||","===e)).length>1)}export const OperacionesPage={template:'\n        <form id="form-entrada">\n            <label for="input1">Ingrese el primer número binario</label>\n            <input name="valor1" type="text" id="input1" required>\n            <label for="input2">Ingrese el segundo número binario</label>\n            <input name="valor2" type="text" id="input2" required>\n            <button type="submit" id="buttonOperacion" class="disabled" disabled>\n                Realizar operaciones\n            </button>\n            <div id="error-message" class="error-message" style="display: none;"></div>\n        </form>\n    ',init:()=>{const e=document.getElementById("form-entrada"),r=document.getElementById("input1"),t=document.getElementById("input2"),i=document.getElementById("buttonOperacion"),o=document.getElementById("error-message"),n=document.querySelector(".elimHistorial"),a=document.getElementById("resultados");function s(e,r,t=""){e.classList.remove("vacia","correcto","incorrecto"),""===e.value.trim()?e.classList.add("vacia"):e.classList.add(r?"correcto":"incorrecto"),t?(o.textContent=t,o.style.display="block"):o.style.display="none"}function l(){const e=r.value.trim(),o=t.value.trim();let n=!0;return""===e?(s(r,!1,"El primer número es requerido"),n=!1):esBinarioValido(e)?s(r,!0):(s(r,!1,"El primer número contiene caracteres no binarios"),n=!1),""===o?(s(t,!1,"El segundo número es requerido"),n=!1):esBinarioValido(o)?s(t,!0):(s(t,!1,"El segundo número contiene caracteres no binarios"),n=!1),i.disabled=!n,i.classList.toggle("enabled",n),i.classList.toggle("disabled",!n),n}a.innerHTML="",r.addEventListener("input",(()=>{l(),r.value.trim()&&!esBinarioValido(r.value)?s(r,!1,"Solo se permiten: 0, 1, punto (.) o coma (,)"):o.style.display="none"})),t.addEventListener("input",(()=>{l(),t.value.trim()&&!esBinarioValido(t.value)?s(t,!1,"Solo se permiten: 0, 1, punto (.) o coma (,)"):o.style.display="none"})),l(),e.addEventListener("submit",(e=>{if(e.preventDefault(),l()){const e=realizarOperaciones(r.value.trim(),t.value.trim());a.innerHTML=e}historial.innerHTML=armarHistorial(n)})),historial.innerHTML=armarHistorial(n),n.addEventListener("click",(()=>{Swal.fire({title:"¿Estás seguro?",text:"Se borrará todo el historial y no podrás recuperarlo.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, borrar",cancelButtonText:"Cancelar",background:'#fff url("assets/bg.webp") no-repeat center/cover',backdrop:"\n    rgba(0,0,0,0.5)\n    left top\n    no-repeat\n  ",color:"white"}).then((e=>{e.isConfirmed&&(Swal.fire({title:"¡Eliminado!",text:"Tu historial fue borrado con éxito.",icon:"success",confirmButtonColor:"#3085d6",background:'url("assets/bg.webp") no-repeat center/cover',color:"#fff",customClass:{icon:"swal2-icon-light"}}),eliminarHistorial(n),historial.innerHTML=armarHistorial(n))})),historial.innerHTML=armarHistorial(n)}))}};